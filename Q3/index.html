<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v3.min.js"></script>
        <style type="text/css">
          div.bar {
            display: inline-block;
            width: 20px;
            height: 75px;   /* We'll override this later */
            background-color: teal;
            margin-right: 2px;
          }
          .axis path,
          .axis line {
              fill: none;
              stroke: black;
              shape-rendering: crispEdges;
          }

          .axis text {
              font-family: sans-serif;
              font-size: 11px;
          }

        </style>
    </head>
    <body>
        <script type="text/javascript">
            var xRange = [10, 250];
            var yRange = [10, 250];
            var dataset = [...Array(100).keys()].map(function(i) {
              var xRange = Math.random() * 1000;
              var yRange = Math.random() * 1000; 
              return [Math.round(Math.random() * xRange), Math.round(Math.random() * yRange)];
            });
            // dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
            //     11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
            var w = 500;
            var h = 300;
            var barPadding = 1;
            var padding = 30;

            /* d3.select("body").selectAll("p")
              .data(dataset)
              .enter()
              .append("p")
              .text(d => "I can count up to " + d)
              .style('color', d => d > 15 ? 'red' : 'black'); */

            // Lesson: properly define functions and css styles!
            /* d3.select("body").selectAll("div")
              .data(dataset)
              .enter()
              .append("div")
              .attr("class", "bar")
              .style("height", function(d) {
                return d * 5 + "px";
              }); */

            var svg = d3.select("body").append("svg")
                        .attr("width", w)
                        .attr("height", h);
            // svg.selectAll("rect")
            //       .data(dataset)
            //       .enter()  // apply to data points and return placeholders for those that do not have a rect, here: all of them 
            //       .append("rect")
            //       .attr("x", function(d, i) {
            //         return i * (w / dataset.length);
            //       })
            //       .attr("y", function(d) {
            //         return h - (d * 4); // Adjusting for y-axis from top to bottom
            //       })
            //       .attr("width", w / dataset.length - barPadding)
            //       .attr("height", function(d) {
            //         return d * 4;
            //       })
            //       .attr("fill", function(d) {
            //         return "rgb(0, 0, " + (d * 10) + ")";
            //       });
            // svg.selectAll("text")
            //       .data(dataset)
            //       .enter()
            //       .append("text")
            //       .text(function(d) {
            //         return d;
            //       })
            //       .attr("x", function(d, i) {
            //         return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
            //       })
            //       .attr("y", function(d) {
            //         return h - (d * 4) + 14; // +14
            //       })
            //       .attr("font-family", "sans-serif")
            //       .attr("font-size", "11px")
            //       .attr("fill", "white")
            //       .attr("text-anchor", "middle");

            // Lesson: selectAll for multiple elements
            /* var circles = svg.selectAll("circle")
                            .data(dataset)
                            .enter()
                            .append("circle");
            circles.attr("cx", function(d, i) {
                    return (i * 50) + 25;
                  })
                  .attr("cy", h/2)
                  .attr("r", function(d) {
                    return d;
                  })
                  .attr("fill", "yellow")
                  .attr("stroke", "orange")
                  .attr("stroke-width", function(d) {
                      return d/2;
                  }); */

            // Scales (generators)
            var xScale = d3.scale.linear()
                                .domain([0, d3.max(dataset, d => d[0])])
                                .range([padding, w - padding * 2]);
            var yScale = d3.scale.linear()
                                .domain([0, d3.max(dataset, d => d[1])])
                                .range([h - padding, padding]); // reverse downwards y-axis to upwards y-axis
            var rScale = d3.scale.linear()
                                .domain([0, d3.max(dataset, d => d[1])])
                                .range([2, 5])
                                .clamp(true);
            
            // Axes
            var xAxis = d3.svg.axis()
                              .scale(xScale)
                              .orient("bottom")
                              .ticks(5);
            var yAxis = d3.svg.axis()
                              .scale(yScale)
                              .orient("left")
                              .ticks(5);

            // Scattered Plot
            svg.selectAll("circle")
                  .data(dataset)
                  .enter()
                  .append("circle")
                  .attr("cx", d => xScale(d[0])) // cx not x, for x of center
                  .attr("cy", d => yScale(d[1])) // cy not y, for y of center
                  .attr("r", d => rScale(d[1])); // h - cy

            // Scattered Plot Labels
            // svg.selectAll("text")
            //       .data(dataset)
            //       .enter()
            //       .append("text")
            //       .text(function(d) {
            //         return d[0] + ", " + d[1];
            //       })
            //       .attr("x", function(d, i) {
            //         return xScale(d[0]);
            //       })
            //       .attr("y", function(d) {
            //         return yScale(d[1]); // +14
            //       })
            //       .attr("font-family", "sans-serif")
            //       .attr("font-size", "11px")
            //       .attr("fill", "red");
            
            // Generate Axes
            svg.append("g")
                  .attr("class", "axis")  // Assign the ".axis" css class
                  .attr("transform", "translate(0," + (h - padding) + ")")  // Transform axis to bottom
                  .call(xAxis);           // takes `this` selection and hands it off to the function it takes (xAxis)
            svg.append("g")
                  .attr("class", "axis")  // Assign the ".axis" css class
                  .attr("transform", "translate(" + padding + ", 0)")  // Transform axis to bottom
                  .call(yAxis);           // takes `this` selection and hands it off to the function it takes (xAxis)
        </script>

        <!-- <svg width="500" height="50"> -->
            <!-- <rect x="0" y="0" width="500" height="50"/> -->
            <!-- <circle cx="250" cy="25" r="25"/> -->
            <!-- <ellipse cx="250" cy="25" rx="100" ry="25"/> -->
            <!-- <line x1="0" y1="0" x2="500" y2="50" stroke="black"/> -->
            <!-- <text x="250" y="25" font-family="sans-serif"
                font-size="25" fill="gray">Easy-peasy</text>
            <circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 1.0)"/>
            <circle cx="50" cy="25" r="20" fill="rgba(0, 0, 255, 0.75)"/>
            <circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.5)"/>
            <circle cx="100" cy="25" r="20" fill="rgba(255, 255, 0, 0.25)"/>
            <circle cx="125" cy="25" r="20" fill="rgba(255, 0, 0, 0.1)"/>   -->
            <!-- <circle cx="25" cy="25" r="20"
                    fill="rgba(128, 0, 128, 0.75)" 
                    stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/>
            <circle cx="65" cy="25" r="20"
                    fill="rgba(128, 0, 128, 0.75)" 
                    stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"
                    opacity="0.5"/>
            <circle cx="105" cy="25" r="20"
                    fill="rgba(128, 0, 128, 0.75)" 
                    stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"
                    opacity="0.2"/> -->
        <!-- </svg> -->
    </body>
</html>  